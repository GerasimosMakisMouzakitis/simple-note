name: Simple CI

on:
  push:
    branches: [ main, develop ]
  pull_request:
    branches: [ main ]

jobs:
  validate:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Validate project structure
      run: |
        echo "‚úÖ Project Links Manager v0.2.0 - Structure Validation"
        echo "üìã Checking v3.0 enterprise structure..."
        
        # Check core files
        test -f README.md && echo "‚úÖ README.md" || echo "‚ùå README.md missing"
        test -f index.html && echo "‚úÖ index.html" || echo "‚ùå index.html missing"
        test -f script.js && echo "‚úÖ script.js" || echo "‚ùå script.js missing"
        
        # Check enterprise folders
        test -d .github && echo "‚úÖ .github/ (CI/CD)" || echo "‚ùå .github/ missing"
        test -d config && echo "‚úÖ config/ (Security & Quality)" || echo "‚ùå config/ missing"
        test -d docs && echo "‚úÖ docs/ (Enhanced documentation)" || echo "‚ùå docs/ missing"
        test -d project-docs && echo "‚úÖ project-docs/" || echo "‚ùå project-docs/ missing"
        test -d test && echo "‚úÖ test/" || echo "‚ùå test/ missing"
        
        # Check templates
        template_count=$(find project-docs/templates -name "*.md" 2>/dev/null | wc -l)
        echo "üìä Template count: $template_count (expected: 17)"
        
        # Check version
        if test -f project-docs/PROJECT_STRUCTURE_VERSION.md; then
          version=$(grep "Current Version:" project-docs/PROJECT_STRUCTURE_VERSION.md | head -1)
          echo "üìå $version"
        else
          echo "‚ö†Ô∏è Version file missing"
        fi
        
        echo "‚úÖ Structure validation complete!"
        
  lint-check:
    runs-on: ubuntu-latest
    if: contains(github.event.head_commit.message, 'lint') || github.event_name == 'pull_request'
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v3
      
    - name: Setup Node.js
      uses: actions/setup-node@v3
      with:
        node-version: '18'
        
    - name: Basic HTML validation
      run: |
        echo "üîç Running basic HTML validation..."
        
        # Check for basic HTML structure
        if [ -f index.html ]; then
          echo "‚úÖ index.html found"
          
          # Basic HTML checks
          grep -q "<!DOCTYPE" index.html && echo "‚úÖ DOCTYPE declaration" || echo "‚ö†Ô∏è DOCTYPE missing"
          grep -q "<html" index.html && echo "‚úÖ HTML tag" || echo "‚ö†Ô∏è HTML tag missing"
          grep -q "<head>" index.html && echo "‚úÖ HEAD section" || echo "‚ö†Ô∏è HEAD section missing"
          grep -q "<body>" index.html && echo "‚úÖ BODY section" || echo "‚ö†Ô∏è BODY section missing"
          
          echo "‚úÖ Basic HTML validation complete"
        else
          echo "‚ùå index.html not found"
          exit 1
        fi